import './polyfills.server.mjs';
import{$ as u,E as M,Fa as I,K as c,O as g,Q as O,Ta as y,U as P,Ua as z,Wa as S,Za as _,aa as e,ba as t,ca as h,ga as x,ha as s,hb as U,ja as w,la as v,ma as f,na as n,oa as p,p as b,pa as k,q as C,qb as E,ub as N,w as d}from"./chunk-57VKGGXC.mjs";import"./chunk-T55IDOPT.mjs";function H(l,i){if(l&1){let a=x();e(0,"div",31),s("click",function(){let r=b(a).$implicit,m=w();return C(m.onChatClick(r))}),e(1,"div",32),n(2),t(),e(3,"div",33)(4,"span",34),n(5),t()(),e(6,"div",35)(7,"span",14),n(8,"trending_flat"),t()()()}if(l&2){let a=i.$implicit;c(2),k(" ",a.name.charAt(0).toUpperCase()," "),c(3),p(a.name)}}function A(l,i){l&1&&(e(0,"div",36)(1,"span",14),n(2,"chat_bubble_outline"),t(),e(3,"p"),n(4,"No recent chats found"),t()())}var R=class l{constructor(i,a,o,r,m){this.http=i;this.router=a;this.loadingService=o;this.cd=r;this.platformId=m}iamUserId=null;iamUserName=d("");domainName=d("");recentChats=d([]);showMenu=d(!1);sidebarWidth=d(300);isResizing=d(!1);ngOnInit(){if(_(this.platformId)){let i=Math.floor(window.innerWidth*.3);if(this.sidebarWidth.set(i),this.iamUserId=localStorage.getItem("iamUserId"),this.iamUserName.set(localStorage.getItem("iamUserName")||""),this.domainName.set(localStorage.getItem("iamDomain")||""),!this.iamUserId){this.router.navigate(["/auth-v1"]);return}this.checkAvailability(),this.loadChats()}}checkAvailability(){this.iamUserId&&this.http.get(`http://localhost:8000/be/iamUser/check?id=${this.iamUserId}`,{responseType:"text"}).subscribe({next:i=>{(i||"").replace(/^"|"$/g,"").trim()==="IAM user not available"&&this.logout()},error:i=>{console.error("Error checking availability:",i)}})}loadChats(){this.iamUserId&&(this.loadingService.show(),this.http.get(`http://localhost:8000/be/message/chat?id=${this.iamUserId}`).subscribe({next:i=>{this.loadingService.hide(),this.recentChats.set(i),this.cd.detectChanges()},error:i=>{this.loadingService.hide(),console.error("Error loading chats:",i),this.cd.detectChanges()}}))}toggleMenu(){this.checkAvailability(),this.showMenu.set(!this.showMenu())}onMenuAction(i){switch(this.checkAvailability(),this.showMenu.set(!1),i){case"logout":this.logout();break;case"announcements":this.router.navigate(["/post-announcement-v2x"]);break;case"queries":this.router.navigate(["/queries-v5t"]);break;case"notes":console.log("Notes clicked");break;case"groups":console.log("View Groups clicked");break}}logout(){_(this.platformId)&&(localStorage.removeItem("iamUserId"),localStorage.removeItem("iamUserName"),localStorage.removeItem("iamDomain")),this.router.navigate(["/auth-v1"])}onChatClick(i){this.checkAvailability(),console.log("Opening chat with:",i.name)}startResize(i){i.preventDefault(),this.isResizing.set(!0)}onResize(i){if(!this.isResizing())return;let a=Math.floor(window.innerWidth*.3),o=Math.floor(window.innerWidth*.4),r=i.clientX;r<a&&(r=a),r>o&&(r=o),this.sidebarWidth.set(r)}stopResize(){this.isResizing.set(!1)}static \u0275fac=function(a){return new(a||l)(g(U),g(E),g(N),g(I),g(M))};static \u0275cmp=O({type:l,selectors:[["app-iam-user-home"]],decls:59,vars:13,consts:[[1,"iam-home-wrapper",3,"mousemove","mouseup"],[1,"main-column"],[1,"welcome-container"],[1,"welcome-content"],[1,"welcome-title"],[1,"highlight"],[1,"welcome-subtitle","desktop-only"],[1,"status-badge","desktop-only"],[1,"pulse-dot"],[1,"resizer-handle",3,"mousedown"],[1,"sidebar-column"],[1,"sidebar-header"],[1,"user-info-area"],[1,"menu-trigger",3,"click"],[1,"material-symbols-rounded"],[1,"user-meta"],[1,"name-status-row"],[1,"iam-name"],[1,"pulse-dot-mini"],[1,"profile-dropdown"],[1,"menu-item",3,"click"],[1,"menu-divider"],[1,"menu-item","logout",3,"click"],[1,"sidebar-content"],[1,"sidebar-actions"],[1,"action-card",3,"click"],[1,"chat-list-header"],[1,"chat-badge"],[1,"chat-scroll-area"],["class","chat-item",3,"click",4,"ngFor","ngForOf"],["class","empty-chats",4,"ngIf"],[1,"chat-item",3,"click"],[1,"chat-avatar"],[1,"chat-details"],[1,"chat-name"],[1,"chat-arrow"],[1,"empty-chats"]],template:function(a,o){a&1&&(e(0,"div",0),s("mousemove",function(m){return o.onResize(m)})("mouseup",function(){return o.stopResize()}),e(1,"section",1)(2,"div",2)(3,"div",3)(4,"h1",4),n(5,"Welcome to "),e(6,"span",5),n(7),t()(),e(8,"p",6),n(9,"Explore smooth workflow of OfficeWing with impressive design "),t(),e(10,"div",7),h(11,"span",8),n(12," System Active "),t()()()(),e(13,"div",9),s("mousedown",function(m){return o.startResize(m)}),t(),e(14,"aside",10)(15,"header",11)(16,"div",12)(17,"button",13),s("click",function(){return o.toggleMenu()}),e(18,"span",14),n(19,"menu"),t()(),e(20,"div",15)(21,"div",16)(22,"h2",17),n(23),t(),h(24,"span",18),t()()(),e(25,"div",19)(26,"button",20),s("click",function(){return o.onMenuAction("announcements")}),e(27,"span",14),n(28,"campaign"),t(),n(29," View Announcement "),t(),e(30,"button",20),s("click",function(){return o.onMenuAction("queries")}),e(31,"span",14),n(32,"quiz"),t(),n(33," Queries "),t(),h(34,"div",21),e(35,"button",22),s("click",function(){return o.onMenuAction("logout")}),e(36,"span",14),n(37,"logout"),t(),n(38," Logout "),t()()(),e(39,"main",23)(40,"div",24)(41,"button",25),s("click",function(){return o.onMenuAction("notes")}),e(42,"span",14),n(43,"notes"),t(),e(44,"span"),n(45,"Notes"),t()(),e(46,"button",25),s("click",function(){return o.onMenuAction("groups")}),e(47,"span",14),n(48,"group"),t(),e(49,"span"),n(50,"View Groups"),t()()(),e(51,"div",26)(52,"h3"),n(53,"Recent Conversations"),t(),e(54,"span",27),n(55),t()(),e(56,"div",28),P(57,H,9,2,"div",29)(58,A,5,0,"div",30),t()()()()),a&2&&(f("resizing",o.isResizing()),c(7),p(o.domainName()),c(6),f("active",o.isResizing()),c(),v("width",o.sidebarWidth(),"px"),c(9),p(o.iamUserName()),c(2),f("show",o.showMenu()),c(30),p(o.recentChats().length),c(2),u("ngForOf",o.recentChats()),c(),u("ngIf",o.recentChats().length===0))},dependencies:[S,y,z],styles:[".iam-home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;height:100vh;background:#000;color:#fff;font-family:Inter,sans-serif;overflow:hidden}.iam-home-wrapper.resizing[_ngcontent-%COMP%]{cursor:col-resize;-webkit-user-select:none;user-select:none}.sidebar-column[_ngcontent-%COMP%]{min-width:300px;background:#080808;border-right:1px solid rgba(255,255,255,.08);display:flex;flex-direction:column;position:relative;z-index:10}.sidebar-header[_ngcontent-%COMP%]{padding:2.5rem 2rem 1.5rem;position:relative;border-bottom:1px solid rgba(255,255,255,.03)}.sidebar-header[_ngcontent-%COMP%]   .user-info-area[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.2rem}.sidebar-header[_ngcontent-%COMP%]   .user-info-area[_ngcontent-%COMP%]   .menu-trigger[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.08);color:#fff;padding:10px;border-radius:14px;cursor:pointer;transition:all .3s;display:flex;align-items:center;justify-content:center;flex-shrink:0}.sidebar-header[_ngcontent-%COMP%]   .user-info-area[_ngcontent-%COMP%]   .menu-trigger[_ngcontent-%COMP%]:hover{background:#fff;color:#000}.sidebar-header[_ngcontent-%COMP%]   .user-info-area[_ngcontent-%COMP%]   .menu-trigger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px}.sidebar-header[_ngcontent-%COMP%]   .user-info-area[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.sidebar-header[_ngcontent-%COMP%]   .user-info-area[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]   .name-status-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.sidebar-header[_ngcontent-%COMP%]   .user-info-area[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]   .name-status-row[_ngcontent-%COMP%]   .iam-name[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;letter-spacing:-.02em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar-header[_ngcontent-%COMP%]   .user-info-area[_ngcontent-%COMP%]   .user-meta[_ngcontent-%COMP%]   .name-status-row[_ngcontent-%COMP%]   .pulse-dot-mini[_ngcontent-%COMP%]{width:8px;height:8px;background:#00ff95;border-radius:50%;box-shadow:0 0 8px #00ff9599;flex-shrink:0;margin-top:4px}.profile-dropdown[_ngcontent-%COMP%]{position:absolute;top:6.5rem;left:2rem;background:#0f0f0f;border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:8px;width:240px;box-shadow:0 30px 60px #000000e6;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s cubic-bezier(.16,1,.3,1);z-index:100}.profile-dropdown.show[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.profile-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{width:100%;padding:12px 14px;display:flex;align-items:center;gap:12px;background:transparent;border:none;color:#ddd;border-radius:10px;cursor:pointer;transition:all .2s;font-weight:500;font-size:.95rem}.profile-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#888}.profile-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background:#ffffff0d;color:#fff}.profile-dropdown[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#fff}.profile-dropdown[_ngcontent-%COMP%]   .menu-item.logout[_ngcontent-%COMP%], .profile-dropdown[_ngcontent-%COMP%]   .menu-item.logout[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f44}.profile-dropdown[_ngcontent-%COMP%]   .menu-item.logout[_ngcontent-%COMP%]:hover{background:#ff44441a}.profile-dropdown[_ngcontent-%COMP%]   .menu-divider[_ngcontent-%COMP%]{height:1px;background:#ffffff0d;margin:6px 8px}.sidebar-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.6rem;margin-bottom:1.5rem}.sidebar-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]{background:#ffffff08;border:1px solid rgba(255,255,255,.08);padding:.8rem;border-radius:14px;display:flex;align-items:center;gap:10px;color:#ddd;cursor:pointer;transition:all .2s cubic-bezier(.16,1,.3,1)}.sidebar-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-size:20px;color:#fff}.sidebar-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-size:.85rem;font-weight:600}.sidebar-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover{background:#fff;color:#000;border-color:#fff;transform:translateY(-2px)}.sidebar-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]:first-child{color:#000}.sidebar-content[_ngcontent-%COMP%]{flex:1;padding:1.5rem 2rem;display:flex;flex-direction:column;overflow:hidden}.sidebar-content[_ngcontent-%COMP%]   .chat-list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.sidebar-content[_ngcontent-%COMP%]   .chat-list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.8rem;text-transform:uppercase;letter-spacing:.12em;color:#666;font-weight:700}.sidebar-content[_ngcontent-%COMP%]   .chat-list-header[_ngcontent-%COMP%]   .chat-badge[_ngcontent-%COMP%]{background:#fff;color:#000;padding:2px 10px;border-radius:100px;font-size:.75rem;font-weight:800}.chat-scroll-area[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-right:4px}.chat-scroll-area[_ngcontent-%COMP%]::-webkit-scrollbar{width:3px}.chat-scroll-area[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff1a;border-radius:10px}.chat-scroll-area[_ngcontent-%COMP%]   .chat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.2rem;padding:.8rem;border-radius:14px;margin-bottom:6px;cursor:pointer;transition:all .3s}.chat-scroll-area[_ngcontent-%COMP%]   .chat-item[_ngcontent-%COMP%]:hover{background:#ffffff0d;transform:translate(4px)}.chat-scroll-area[_ngcontent-%COMP%]   .chat-item[_ngcontent-%COMP%]   .chat-avatar[_ngcontent-%COMP%]{width:44px;height:44px;background:#fff;color:#000;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.1rem}.chat-scroll-area[_ngcontent-%COMP%]   .chat-item[_ngcontent-%COMP%]   .chat-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;flex:1;min-width:0}.chat-scroll-area[_ngcontent-%COMP%]   .chat-item[_ngcontent-%COMP%]   .chat-details[_ngcontent-%COMP%]   .chat-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.05rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chat-scroll-area[_ngcontent-%COMP%]   .chat-item[_ngcontent-%COMP%]   .chat-arrow[_ngcontent-%COMP%]{color:#fff;opacity:.3;transition:all .3s;display:flex;align-items:center}.chat-scroll-area[_ngcontent-%COMP%]   .chat-item[_ngcontent-%COMP%]   .chat-arrow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}.chat-scroll-area[_ngcontent-%COMP%]   .chat-item[_ngcontent-%COMP%]:hover   .chat-arrow[_ngcontent-%COMP%]{opacity:1;transform:translate(4px)}.resizer-handle[_ngcontent-%COMP%]{width:4px;background:transparent;cursor:col-resize;position:relative;z-index:20;transition:background .2s}.resizer-handle[_ngcontent-%COMP%]:hover, .resizer-handle.active[_ngcontent-%COMP%]{background:#fff3}.main-column[_ngcontent-%COMP%]{flex:1;background:#000;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}.welcome-container[_ngcontent-%COMP%]{width:85%;max-width:700px;text-align:center;position:relative;z-index:5}.welcome-container[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]{padding:5rem 3rem;border:1px solid rgba(255,255,255,.05);background:#ffffff05;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:48px;box-shadow:0 50px 100px #000000e6}.welcome-container[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]   .welcome-title[_ngcontent-%COMP%]{font-size:3.8rem;font-weight:900;margin-bottom:1.5rem;line-height:1;letter-spacing:-.05em}.welcome-container[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]   .welcome-title[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(135deg,#fff,#888);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.welcome-container[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]   .welcome-subtitle[_ngcontent-%COMP%]{font-size:1.3rem;color:#999;line-height:1.5;margin-bottom:3rem;font-weight:400}.welcome-container[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:12px;background:#fff;color:#000;padding:10px 20px;border-radius:100px;font-size:.85rem;font-weight:800;text-transform:uppercase;letter-spacing:.1em}.welcome-container[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   .pulse-dot[_ngcontent-%COMP%]{width:8px;height:8px;background:#000;border-radius:50%;box-shadow:0 0 10px #0003}@media(max-width:768px){.iam-home-wrapper[_ngcontent-%COMP%]{flex-direction:column;height:auto;overflow-y:auto}.main-column[_ngcontent-%COMP%]{height:auto;min-height:30vh;width:100%!important;flex-shrink:0;background:#000}.sidebar-column[_ngcontent-%COMP%]{width:100%!important;min-width:100%;border-right:none;border-top:1px solid rgba(255,255,255,.08)}.resizer-handle[_ngcontent-%COMP%]{display:none}.desktop-only[_ngcontent-%COMP%]{display:none!important}.welcome-container[_ngcontent-%COMP%]{padding:2rem 1rem;width:90%}.welcome-container[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]{padding:2rem 1rem;border-radius:24px;border:none;background:transparent;box-shadow:none}.welcome-container[_ngcontent-%COMP%]   .welcome-content[_ngcontent-%COMP%]   .welcome-title[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:0}}"]})};export{R as IamUserHome};

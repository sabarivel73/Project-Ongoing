import './polyfills.server.mjs';
import{a as T,b as L,c as W,d as N,e as F,f as U,h as A,i as j,l as B}from"./chunk-4AQZEVAQ.mjs";import{$ as m,E as P,K as r,O as h,Q as y,U as _,Ua as I,Wa as E,Za as q,aa as i,ba as t,ca as O,ga as k,ha as C,hb as R,ja as b,ma as d,na as n,oa as u,p,pa as w,q as g,qa as x,qb as D,ra as v,rb as z,sa as M,ub as V,va as S}from"./chunk-57VKGGXC.mjs";import"./chunk-T55IDOPT.mjs";var G=()=>["/auth-v1"];function Z(s,o){if(s&1&&(i(0,"div",29),n(1),t()),s&2){let a=b();r(),w(" ",a.successMessage," ")}}function J(s,o){if(s&1&&(i(0,"div",30),n(1),t()),s&2){let a=b();r(),w(" ",a.errorMessage," ")}}function K(s,o){if(s&1&&(i(0,"div",31),n(1),t()),s&2){let a=b();r(),w(" ",a.nameDisclaimer," ")}}function Q(s,o){if(s&1&&(i(0,"div",31),n(1),t()),s&2){let a=b();r(),w(" ",a.emailDisclaimer," ")}}function X(s,o){s&1&&(i(0,"div",32),n(1," Passwords do not match. "),t())}var H=class s{constructor(o,a,e,c){this.http=o;this.router=a;this.loadingService=e;this.platformId=c}name="";email="";password="";confirmPassword="";nameDisclaimer="";emailDisclaimer="";passwordDisclaimer="";errorMessage="";successMessage="";requirements={length:!1,upper:!1,lower:!1,number:!1,symbol:!1};ngOnInit(){if(q(this.platformId)){if(localStorage.getItem("rootUserId")){this.router.navigate(["/root-home-v2b"]);return}let a=localStorage.getItem("iamUserId")}}checkRequirements(){this.requirements.length=this.password.length>=8&&this.password.length<=16,this.requirements.upper=/[A-Z]/.test(this.password),this.requirements.lower=/[a-z]/.test(this.password),this.requirements.number=/[0-9]/.test(this.password),this.requirements.symbol=/[!@#$%^&*(),.?":{}|<>]/.test(this.password)}isFormValid(){return this.name.length>0&&this.email.length>0&&this.requirements.length&&this.requirements.upper&&this.requirements.lower&&this.requirements.number&&this.requirements.symbol&&this.password===this.confirmPassword}onRegister(){if(!this.isFormValid())return;this.clearDisclaimers(),this.loadingService.show();let o={name:this.name,password:this.password,email:this.email};this.http.post("http://localhost:8000/be/rootUser",o,{responseType:"text"}).subscribe({next:a=>{this.loadingService.hide();let e=a&&a.replace(/^"|"$/g,"").trim();e==="User saved"?(this.successMessage="User registered successfully",setTimeout(()=>{this.router.navigate(["/auth-v1"])},2e3)):this.handleApiError(e)},error:a=>{this.loadingService.hide(),console.error("Registration error",a),this.errorMessage="An error occurred. Please try again."}})}clearDisclaimers(){this.nameDisclaimer="",this.emailDisclaimer="",this.passwordDisclaimer="",this.errorMessage="",this.successMessage=""}handleApiError(o){o.includes("Name field only accepts letters only")?this.nameDisclaimer=o:o.includes("User name already exist")?this.nameDisclaimer=o:o.includes("For now we only allow email end up with @gmail.com address")?this.emailDisclaimer=o:o.includes("Email already exist")?this.emailDisclaimer=o:this.errorMessage=o}static \u0275fac=function(a){return new(a||s)(h(R),h(D),h(V),h(P))};static \u0275cmp=y({type:s,selectors:[["app-register"]],decls:76,vars:31,consts:[["registerForm","ngForm"],["nameInput","ngModel"],["emailInput","ngModel"],["passInput","ngModel"],["confirmInput","ngModel"],[1,"register-wrapper"],["routerLink","/auth-v1",1,"back-link"],[1,"material-symbols-rounded"],[1,"logo-area"],["src","assets/logo.png","alt","OfficeWing Logo",1,"logo"],[1,"content-container"],["class","success-message",4,"ngIf"],["class","error-message general-error",4,"ngIf"],[1,"page-title"],[1,"register-form",3,"ngSubmit"],[1,"form-group"],[1,"input-wrapper"],[1,"material-symbols-rounded","input-icon"],["type","text","name","name","placeholder","Root User Name","required","",3,"ngModelChange","ngModel"],["class","disclaimer",4,"ngIf"],["type","email","name","email","placeholder","Email Address","required","","email","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Password","required","",3,"ngModelChange","input","ngModel"],[1,"requirements-list"],[1,"requirement"],["type","password","name","confirmPassword","placeholder","Confirm Password","required","",3,"ngModelChange","ngModel"],["class","error-text",4,"ngIf"],["type","submit",1,"submit-btn",3,"disabled"],[1,"back-link-bottom"],[3,"routerLink"],[1,"success-message"],[1,"error-message","general-error"],[1,"disclaimer"],[1,"error-text"]],template:function(a,e){if(a&1){let c=k();i(0,"div",5)(1,"button",6)(2,"span",7),n(3,"arrow_back"),t(),n(4," Back "),t(),i(5,"div",8),O(6,"img",9),t(),i(7,"div",10),_(8,Z,2,1,"div",11)(9,J,2,1,"div",12),i(10,"h1",13),n(11,"Create Account"),t(),i(12,"form",14,0),C("ngSubmit",function(){return p(c),g(e.onRegister())}),i(14,"div",15)(15,"label"),n(16,"Root User Name"),t(),i(17,"div",16)(18,"span",17),n(19,"person"),t(),i(20,"input",18,1),M("ngModelChange",function(l){return p(c),v(e.name,l)||(e.name=l),g(l)}),t()(),_(22,K,2,1,"div",19),t(),i(23,"div",15)(24,"label"),n(25,"Email"),t(),i(26,"div",16)(27,"span",17),n(28,"mail"),t(),i(29,"input",20,2),M("ngModelChange",function(l){return p(c),v(e.email,l)||(e.email=l),g(l)}),t()(),_(31,Q,2,1,"div",19),t(),i(32,"div",15)(33,"label"),n(34,"Password"),t(),i(35,"div",16)(36,"span",17),n(37,"lock"),t(),i(38,"input",21,3),M("ngModelChange",function(l){return p(c),v(e.password,l)||(e.password=l),g(l)}),C("input",function(){return p(c),g(e.checkRequirements())}),t()(),i(40,"div",22)(41,"div",23)(42,"span",7),n(43),t(),n(44," 8-16 characters "),t(),i(45,"div",23)(46,"span",7),n(47),t(),n(48," One uppercase letter "),t(),i(49,"div",23)(50,"span",7),n(51),t(),n(52," One lowercase letter "),t(),i(53,"div",23)(54,"span",7),n(55),t(),n(56," One number "),t(),i(57,"div",23)(58,"span",7),n(59),t(),n(60," One special symbol "),t()()(),i(61,"div",15)(62,"label"),n(63,"Confirm Password"),t(),i(64,"div",16)(65,"span",17),n(66,"verified_user"),t(),i(67,"input",24,4),M("ngModelChange",function(l){return p(c),v(e.confirmPassword,l)||(e.confirmPassword=l),g(l)}),t()(),_(69,X,2,0,"div",25),t(),i(70,"button",26),n(71,"Register"),t(),i(72,"div",27),n(73," Already have an account? "),i(74,"a",28),n(75,"Sign In"),t()()()()()}a&2&&(r(8),m("ngIf",e.successMessage),r(),m("ngIf",e.errorMessage),r(11),d("input-error",e.nameDisclaimer),x("ngModel",e.name),r(2),m("ngIf",e.nameDisclaimer),r(7),d("input-error",e.emailDisclaimer),x("ngModel",e.email),r(2),m("ngIf",e.emailDisclaimer),r(7),x("ngModel",e.password),r(3),d("valid",e.requirements.length),r(2),u(e.requirements.length?"check_box":"check_box_outline_blank"),r(2),d("valid",e.requirements.upper),r(2),u(e.requirements.upper?"check_box":"check_box_outline_blank"),r(2),d("valid",e.requirements.lower),r(2),u(e.requirements.lower?"check_box":"check_box_outline_blank"),r(2),d("valid",e.requirements.number),r(2),u(e.requirements.number?"check_box":"check_box_outline_blank"),r(2),d("valid",e.requirements.symbol),r(2),u(e.requirements.symbol?"check_box":"check_box_outline_blank"),r(8),x("ngModel",e.confirmPassword),r(2),m("ngIf",e.confirmPassword&&e.password!==e.confirmPassword),r(),m("disabled",!e.isFormValid()),r(4),m("routerLink",S(30,G)))},dependencies:[E,I,B,U,T,L,W,A,j,F,N,z],styles:["[_nghost-%COMP%]{display:block;font-family:Inter,sans-serif;background-color:#000;min-height:100vh;color:#fff}.register-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;padding:2rem;box-sizing:border-box;align-items:center;justify-content:center;position:relative}@media(max-width:768px){.register-wrapper[_ngcontent-%COMP%]{padding:2rem 1rem;justify-content:center}}.back-link[_ngcontent-%COMP%]{position:absolute;top:2rem;left:2rem;display:flex;align-items:center;gap:.5rem;color:#aaa;text-decoration:none;font-size:.9rem;padding:0;background:transparent;border:none;cursor:pointer;transition:color .2s;z-index:100}.back-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}.back-link[_ngcontent-%COMP%]:hover{color:#fff}@media(max-width:768px){.back-link[_ngcontent-%COMP%]{top:1rem;left:1rem}}.logo-area[_ngcontent-%COMP%]{position:absolute;top:2rem;right:2rem;width:auto}.logo-area[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:40px;width:auto}@media(max-width:768px){.logo-area[_ngcontent-%COMP%]{display:none}}.content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;max-width:450px}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:2.5rem;text-align:center}.register-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.6rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#eee}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#666;font-size:20px;pointer-events:none}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background-color:#121212;border:1px solid #333333;border-radius:6px;padding:12px 12px 12px 40px;color:#fff;font-family:inherit;font-size:.95rem;outline:none;transition:border-color .2s;box-sizing:border-box}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#666}.input-wrapper[_ngcontent-%COMP%]   input.input-error[_ngcontent-%COMP%]{border-color:#ff5252!important}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#444}.disclaimer[_ngcontent-%COMP%]{color:#ff5252;font-size:.8rem;line-height:1.4;padding:.2rem .5rem}.error-text[_ngcontent-%COMP%]{color:#ff5252;font-size:.8rem;margin-top:.2rem}.general-error[_ngcontent-%COMP%]{color:#ff5252;background:#ff52521a;padding:.8rem;border-radius:4px;width:100%;text-align:center;margin-bottom:1.5rem;font-size:.9rem;box-sizing:border-box}.success-message[_ngcontent-%COMP%]{color:#4caf50;background:#4caf501a;padding:.8rem;border-radius:4px;width:100%;text-align:center;margin-bottom:1.5rem;font-size:.9rem;box-sizing:border-box}.requirements-list[_ngcontent-%COMP%]{margin-top:.8rem;display:flex;flex-wrap:wrap;gap:.6rem;background:#ffffff08;padding:.8rem;border-radius:8px}.requirements-list[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem;font-size:.75rem;color:#555;transition:color .2s}.requirements-list[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}.requirements-list[_ngcontent-%COMP%]   .requirement.valid[_ngcontent-%COMP%]{color:#4caf50}.submit-btn[_ngcontent-%COMP%]{width:100%;background-color:#fff;color:#000;border:none;border-radius:6px;padding:14px;font-size:1rem;font-weight:600;cursor:pointer;transition:opacity .2s;margin-top:1rem}.submit-btn[_ngcontent-%COMP%]:hover{opacity:.9}.submit-btn[_ngcontent-%COMP%]:disabled{background-color:#444;color:#777;cursor:not-allowed;opacity:.7}.back-link-bottom[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;color:#aaa;font-size:.9rem}.back-link-bottom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-weight:600;margin-left:.3rem}.back-link-bottom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{H as Register};

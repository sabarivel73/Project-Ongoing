import './polyfills.server.mjs';
import{a as H,b as z,c as T,d as D,e as N,f as F,h as R,l as j}from"./chunk-4AQZEVAQ.mjs";import{$ as f,E as x,K as r,O as h,Q as O,U as _,Ua as y,Wa as I,Za as S,aa as i,ba as t,ga as k,ha as w,hb as q,ja as P,ma as g,na as n,oa as u,p as c,pa as M,q as m,qa as b,qb as E,ra as C,sa as v,ub as V}from"./chunk-57VKGGXC.mjs";import"./chunk-T55IDOPT.mjs";function L(s,l){if(s&1&&(i(0,"div",25),n(1),t()),s&2){let o=P();r(),u(o.oldPasswordDisclaimer)}}function U(s,l){if(s&1&&(i(0,"div",25),n(1),t()),s&2){let o=P();r(),u(o.confirmPasswordDisclaimer)}}function B(s,l){if(s&1&&(i(0,"div",26)(1,"span",3),n(2,"error"),t(),n(3),t()),s&2){let o=P();r(3),M(" ",o.errorMessage," ")}}function A(s,l){if(s&1&&(i(0,"div",27)(1,"span",3),n(2,"check_circle"),t(),n(3),t()),s&2){let o=P();r(3),M(" ",o.successMessage," ")}}var W=class s{constructor(l,o,e,d){this.http=l;this.router=o;this.loadingService=e;this.platformId=d}rootUserId=null;oldPassword="";newPassword="";confirmPassword="";errorMessage="";successMessage="";oldPasswordDisclaimer="";confirmPasswordDisclaimer="";requirements={length:!1,upper:!1,lower:!1,number:!1,symbol:!1};ngOnInit(){if(S(this.platformId)&&(this.rootUserId=localStorage.getItem("rootUserId"),!this.rootUserId)){this.router.navigate(["/auth-v1"]);return}}checkRequirements(){this.requirements.length=this.newPassword.length>=8&&this.newPassword.length<=16,this.requirements.upper=/[A-Z]/.test(this.newPassword),this.requirements.lower=/[a-z]/.test(this.newPassword),this.requirements.number=/[0-9]/.test(this.newPassword),this.requirements.symbol=/[!@#$%^&*(),.?":{}|<>]/.test(this.newPassword)}validateOldPassword(){this.oldPasswordDisclaimer=this.oldPassword?"":"Old password is required"}validateNewPassword(){this.checkRequirements()}validateConfirmPassword(){this.confirmPassword&&this.newPassword!==this.confirmPassword?this.confirmPasswordDisclaimer="Passwords do not match":this.confirmPasswordDisclaimer=""}isFormValid(){let l=Object.values(this.requirements).every(o=>o);return this.oldPassword.length>0&&l&&this.newPassword===this.confirmPassword}onChangePassword(){if(!this.isFormValid())return;this.loadingService.show(),this.errorMessage="",this.successMessage="";let l=`http://localhost:8000/be/rootUser/inline_change?id=${this.rootUserId}&old_password=${encodeURIComponent(this.oldPassword)}&password=${encodeURIComponent(this.newPassword)}`;this.http.put(l,{},{responseType:"text"}).subscribe({next:o=>{this.loadingService.hide();let e=o&&o.replace(/^"|"$/g,"").trim();e==="Password changed successfully"?(this.successMessage=e,setTimeout(()=>{this.router.navigate(["/root-home-v2b"])},2e3)):this.errorMessage=e},error:o=>{this.loadingService.hide(),this.errorMessage="An error occurred. Please try again.",console.error(o)}})}onForgot(){this.router.navigate(["/reset-init-7a2"],{state:{flow:"inhome"}})}goBack(){this.router.navigate(["/edit-profile-v7y"])}static \u0275fac=function(o){return new(o||s)(h(q),h(E),h(V),h(x))};static \u0275cmp=O({type:s,selectors:[["app-in-home-change-password"]],decls:64,vars:27,consts:[["changeForm","ngForm"],[1,"change-password-wrapper"],[1,"back-link",3,"click"],[1,"material-symbols-rounded"],[1,"change-password-card"],[1,"header"],[1,"subtitle"],[1,"change-form",3,"ngSubmit"],[1,"input-group"],["for","oldPassword"],[1,"input-wrapper"],[1,"material-symbols-rounded","icon"],["type","password","id","oldPassword","name","oldPassword","placeholder","Enter old password","required","",3,"ngModelChange","input","ngModel"],["class","disclaimer",4,"ngIf"],["for","newPassword"],["type","password","id","newPassword","name","newPassword","placeholder","Enter new password","required","",3,"ngModelChange","input","ngModel"],[1,"requirements-box"],[1,"requirement"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm new password","required","",3,"ngModelChange","input","ngModel"],[1,"forgot-link-area"],["type","button",1,"forgot-link",3,"click"],["class","message error",4,"ngIf"],["class","message success",4,"ngIf"],["type","submit",1,"submit-btn",3,"disabled"],[1,"disclaimer"],[1,"message","error"],[1,"message","success"]],template:function(o,e){if(o&1){let d=k();i(0,"div",1)(1,"button",2),w("click",function(){return c(d),m(e.goBack())}),i(2,"span",3),n(3,"arrow_back"),t(),n(4," Back "),t(),i(5,"div",4)(6,"header",5)(7,"h1"),n(8,"Change Password"),t(),i(9,"p",6),n(10,"Secure your account with a new password"),t()(),i(11,"form",7,0),w("ngSubmit",function(){return c(d),m(e.onChangePassword())}),i(13,"div",8)(14,"label",9),n(15,"Old Password"),t(),i(16,"div",10)(17,"span",11),n(18,"lock_open"),t(),i(19,"input",12),v("ngModelChange",function(a){return c(d),C(e.oldPassword,a)||(e.oldPassword=a),m(a)}),w("input",function(){return c(d),m(e.validateOldPassword())}),t()(),_(20,L,2,1,"div",13),t(),i(21,"div",8)(22,"label",14),n(23,"New Password"),t(),i(24,"div",10)(25,"span",11),n(26,"lock"),t(),i(27,"input",15),v("ngModelChange",function(a){return c(d),C(e.newPassword,a)||(e.newPassword=a),m(a)}),w("input",function(){return c(d),m(e.validateNewPassword())}),t()(),i(28,"div",16)(29,"div",17)(30,"span",3),n(31),t(),n(32," 8-16 characters "),t(),i(33,"div",17)(34,"span",3),n(35),t(),n(36," One uppercase "),t(),i(37,"div",17)(38,"span",3),n(39),t(),n(40," One lowercase "),t(),i(41,"div",17)(42,"span",3),n(43),t(),n(44," One number "),t(),i(45,"div",17)(46,"span",3),n(47),t(),n(48," One symbol "),t()()(),i(49,"div",8)(50,"label",18),n(51,"Confirm New Password"),t(),i(52,"div",10)(53,"span",11),n(54,"verified_user"),t(),i(55,"input",19),v("ngModelChange",function(a){return c(d),C(e.confirmPassword,a)||(e.confirmPassword=a),m(a)}),w("input",function(){return c(d),m(e.validateConfirmPassword())}),t()(),_(56,U,2,1,"div",13),t(),i(57,"div",20)(58,"button",21),w("click",function(){return c(d),m(e.onForgot())}),n(59,"Forgot password?"),t()(),_(60,B,4,1,"div",22)(61,A,4,1,"div",23),i(62,"button",24),n(63," Change Password "),t()()()()}o&2&&(r(19),g("input-error",e.oldPasswordDisclaimer),b("ngModel",e.oldPassword),r(),f("ngIf",e.oldPasswordDisclaimer),r(7),b("ngModel",e.newPassword),r(2),g("valid",e.requirements.length),r(2),u(e.requirements.length?"check_box":"check_box_outline_blank"),r(2),g("valid",e.requirements.upper),r(2),u(e.requirements.upper?"check_box":"check_box_outline_blank"),r(2),g("valid",e.requirements.lower),r(2),u(e.requirements.lower?"check_box":"check_box_outline_blank"),r(2),g("valid",e.requirements.number),r(2),u(e.requirements.number?"check_box":"check_box_outline_blank"),r(2),g("valid",e.requirements.symbol),r(2),u(e.requirements.symbol?"check_box":"check_box_outline_blank"),r(8),g("input-error",e.confirmPasswordDisclaimer),b("ngModel",e.confirmPassword),r(),f("ngIf",e.confirmPasswordDisclaimer),r(4),f("ngIf",e.errorMessage),r(),f("ngIf",e.successMessage),r(),f("disabled",!e.isFormValid()))},dependencies:[I,y,j,F,H,z,T,R,N,D],styles:["[_nghost-%COMP%]{display:block;font-family:Inter,sans-serif;background-color:#000;min-height:100vh;color:#fff}.change-password-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;padding:2rem;box-sizing:border-box;align-items:center;justify-content:center;position:relative}@media(max-width:768px){.change-password-wrapper[_ngcontent-%COMP%]{padding:2rem 1rem;justify-content:center}}.back-link[_ngcontent-%COMP%]{position:absolute;top:2rem;left:2rem;background:transparent;border:none;color:#aaa;display:flex;align-items:center;gap:.5rem;cursor:pointer;font-size:.9rem;padding:0;transition:color .2s;z-index:100}.back-link[_ngcontent-%COMP%]:hover{color:#fff}.back-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}@media(max-width:768px){.back-link[_ngcontent-%COMP%]{top:1rem;left:1rem}}.change-password-card[_ngcontent-%COMP%]{width:100%;max-width:450px}.header[_ngcontent-%COMP%]{margin-bottom:2.5rem;text-align:center;position:relative;padding-top:1rem}@media(max-width:768px){.header[_ngcontent-%COMP%]{padding-top:2.5rem}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:.5rem}.header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#aaa;font-size:.95rem}.change-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2rem}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.6rem}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#eee}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#666;font-size:20px;pointer-events:none}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background-color:#121212;border:1px solid #333333;border-radius:8px;padding:12px 12px 12px 40px;color:#fff;font-family:inherit;font-size:.95rem;outline:none;transition:all .2s;box-sizing:border-box}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#666;background-color:#1a1a1a}.input-wrapper[_ngcontent-%COMP%]   input.input-error[_ngcontent-%COMP%]{border-color:#ff5252!important}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#444}.disclaimer[_ngcontent-%COMP%]{color:#ff5252;font-size:.8rem;margin-top:.2rem}.requirements-box[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem;background:#ffffff08;padding:1rem;border-radius:8px;margin-top:.5rem}.requirements-box[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;color:#555;transition:all .3s ease}.requirements-box[_ngcontent-%COMP%]   .requirement[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}.requirements-box[_ngcontent-%COMP%]   .requirement.valid[_ngcontent-%COMP%], .requirements-box[_ngcontent-%COMP%]   .requirement.valid[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4caf50}.forgot-link-area[_ngcontent-%COMP%]{text-align:right}.forgot-link-area[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]{color:#aaa;font-size:.85rem;text-decoration:none;transition:color .2s}.forgot-link-area[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]:hover{color:#fff;text-decoration:underline}.message[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;font-size:.9rem;display:flex;align-items:center;gap:.8rem;margin-bottom:.5rem}.message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}.message.error[_ngcontent-%COMP%]{background:#ff52521a;color:#ff5252;border:1px solid rgba(255,82,82,.2)}.message.success[_ngcontent-%COMP%]{background:#4caf501a;color:#4caf50;border:1px solid rgba(76,175,80,.2)}.submit-btn[_ngcontent-%COMP%]{width:100%;background-color:#fff;color:#000;border:none;border-radius:8px;padding:14px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s;margin-top:.5rem}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9;transform:translateY(-2px)}.submit-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.submit-btn[_ngcontent-%COMP%]:disabled{background-color:#222;color:#555;cursor:not-allowed;opacity:.7}"]})};export{W as InHomeChangePassword};

import{a as z,b as E,c as V,d as T,e as F,f as j,h as U,l as R}from"./chunk-D3LC5IFA.js";import{B as C,D as a,H as d,Ha as N,I as M,La as B,M as _,P as p,Q as i,R as n,W as x,X as g,Z as u,aa as v,ba as r,ca as P,da as h,ea as O,fa as w,ga as y,p as c,q as l,sa as I,ua as D,va as k,za as S}from"./chunk-7ZATYVOE.js";function A(o,s){if(o&1&&(i(0,"div",17),r(1),n()),o&2){let e=u();a(),P(e.nameDisclaimer)}}function H(o,s){if(o&1&&(i(0,"div",18)(1,"span",3),r(2,"error"),n(),r(3),n()),o&2){let e=u();a(3),h(" ",e.errorMessage," ")}}function W(o,s){if(o&1&&(i(0,"div",19)(1,"span",3),r(2,"check_circle"),n(),r(3),n()),o&2){let e=u();a(3),h(" ",e.successMessage," ")}}var L=class o{constructor(s,e,t,m){this.http=s;this.router=e;this.loadingService=t;this.platformId=m}domainName="";errorMessage="";successMessage="";nameDisclaimer="";rootUserId=null;ngOnInit(){k(this.platformId)&&(this.rootUserId=localStorage.getItem("rootUserId"),this.rootUserId||this.router.navigate(["/auth-v1"]))}validateName(){this.domainName&&!/^[A-Za-z0-9-]+$/.test(this.domainName)?this.nameDisclaimer="Domain name can only contain letters, numbers, and hyphens":this.nameDisclaimer=""}isFormValid(){return!!this.domainName&&!this.nameDisclaimer}goBack(){this.router.navigate(["/root-home-v2b"])}onCreateDomain(){if(!this.isFormValid()||!this.rootUserId)return;this.loadingService.show(),this.errorMessage="",this.successMessage="";let s=`http://localhost:8000/be/rootUser/domain?name=${encodeURIComponent(this.domainName)}&id=${this.rootUserId}`;this.http.post(s,{},{responseType:"text"}).subscribe({next:e=>{this.loadingService.hide();let t=e&&e.replace(/^"|"$/g,"").trim();t==="Domain created"?(this.successMessage="Domain created",setTimeout(()=>{this.router.navigate(["/root-home-v2b"])},1500)):this.errorMessage=t||"Failed to create domain"},error:e=>{this.loadingService.hide(),console.error("Error creating domain",e),this.errorMessage="An error occurred. Please try again."}})}static \u0275fac=function(e){return new(e||o)(d(S),d(N),d(B),d(C))};static \u0275cmp=M({type:o,selectors:[["app-create-domain"]],decls:25,vars:7,consts:[["domainForm","ngForm"],[1,"create-domain-wrapper"],[1,"back-link",3,"click"],[1,"material-symbols-rounded"],[1,"create-domain-card"],[1,"header"],[1,"subtitle"],[1,"domain-form",3,"ngSubmit"],[1,"input-group"],["for","domainName"],[1,"input-wrapper"],[1,"material-symbols-rounded","icon"],["type","text","id","domainName","name","domainName","placeholder","Enter domain name","required","",3,"ngModelChange","input","ngModel"],["class","disclaimer",4,"ngIf"],["class","message error",4,"ngIf"],["class","message success",4,"ngIf"],["type","submit",1,"submit-btn",3,"disabled"],[1,"disclaimer"],[1,"message","error"],[1,"message","success"]],template:function(e,t){if(e&1){let m=x();i(0,"div",1)(1,"button",2),g("click",function(){return c(m),l(t.goBack())}),i(2,"span",3),r(3,"arrow_back"),n(),r(4," Back "),n(),i(5,"div",4)(6,"header",5)(7,"h1"),r(8,"Create Domain"),n(),i(9,"p",6),r(10,"Initialize your new environment"),n()(),i(11,"form",7,0),g("ngSubmit",function(){return c(m),l(t.onCreateDomain())}),i(13,"div",8)(14,"label",9),r(15,"Domain Name"),n(),i(16,"div",10)(17,"span",11),r(18,"domain"),n(),i(19,"input",12),y("ngModelChange",function(b){return c(m),w(t.domainName,b)||(t.domainName=b),l(b)}),g("input",function(){return c(m),l(t.validateName())}),n()(),_(20,A,2,1,"div",13),n(),_(21,H,4,1,"div",14)(22,W,4,1,"div",15),i(23,"button",16),r(24," Create Domain "),n()()()()}e&2&&(a(19),v("input-error",t.nameDisclaimer),O("ngModel",t.domainName),a(),p("ngIf",t.nameDisclaimer),a(),p("ngIf",t.errorMessage),a(),p("ngIf",t.successMessage),a(),p("disabled",!t.isFormValid()))},dependencies:[D,I,R,j,z,E,V,U,F,T],styles:["[_nghost-%COMP%]{display:block;font-family:Inter,sans-serif;background-color:#000;min-height:100vh;color:#fff}.create-domain-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;padding:2rem;box-sizing:border-box;align-items:center;justify-content:center;position:relative}@media(max-width:768px){.create-domain-wrapper[_ngcontent-%COMP%]{padding:2rem 1rem;justify-content:center}}.back-link[_ngcontent-%COMP%]{position:absolute;top:2rem;left:2rem;background:transparent;border:none;color:#aaa;display:flex;align-items:center;gap:.5rem;cursor:pointer;font-size:.9rem;padding:0;transition:color .2s;z-index:100}.back-link[_ngcontent-%COMP%]:hover{color:#fff}.back-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}@media(max-width:768px){.back-link[_ngcontent-%COMP%]{top:1rem;left:1rem}}.create-domain-card[_ngcontent-%COMP%]{width:100%;max-width:450px}.header[_ngcontent-%COMP%]{margin-bottom:2.5rem;text-align:center;position:relative;padding-top:1rem}@media(max-width:768px){.header[_ngcontent-%COMP%]{padding-top:2.5rem}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:.5rem}.header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#aaa;font-size:.95rem}.domain-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.6rem}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#eee}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#666;font-size:20px;pointer-events:none}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background-color:#121212;border:1px solid #333333;border-radius:8px;padding:12px 12px 12px 40px;color:#fff;font-family:inherit;font-size:.95rem;outline:none;transition:all .2s;box-sizing:border-box}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#666;background-color:#1a1a1a}.input-wrapper[_ngcontent-%COMP%]   input.input-error[_ngcontent-%COMP%]{border-color:#ff5252!important}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#444}.disclaimer[_ngcontent-%COMP%]{color:#ff5252;font-size:.8rem;margin-top:.2rem}.message[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;font-size:.9rem;display:flex;align-items:center;gap:.8rem;margin-bottom:.5rem}.message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}.message.error[_ngcontent-%COMP%]{background:#ff52521a;color:#ff5252;border:1px solid rgba(255,82,82,.2)}.message.success[_ngcontent-%COMP%]{background:#4caf501a;color:#4caf50;border:1px solid rgba(76,175,80,.2)}.submit-btn[_ngcontent-%COMP%]{width:100%;background-color:#fff;color:#000;border:none;border-radius:8px;padding:14px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s;margin-top:.5rem}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9;transform:translateY(-2px)}.submit-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.submit-btn[_ngcontent-%COMP%]:disabled{background-color:#222;color:#555;cursor:not-allowed;opacity:.7}"]})};export{L as CreateDomain};

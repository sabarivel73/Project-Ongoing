import{a as k,b as S,c as E,d as q,e as U,f as z,h as N,l as D}from"./chunk-D3LC5IFA.js";import{B as C,D as r,H as _,Ha as I,I as M,La as T,M as p,P as c,Q as n,R as e,X as g,Z as u,aa as f,ba as t,ca as w,da as d,ea as h,fa as b,ga as x,sa as P,ua as v,va as O,za as y}from"./chunk-7ZATYVOE.js";function W(o,s){if(o&1&&(n(0,"div",23),t(1),e()),o&2){let a=u();r(),d(" ",a.nameDisclaimer," ")}}function R(o,s){if(o&1&&(n(0,"div",24)(1,"div",25)(2,"span",26),t(3),e(),t(4," 8-16 characters "),e(),n(5,"div",25)(6,"span",26),t(7),e(),t(8," One uppercase "),e(),n(9,"div",25)(10,"span",26),t(11),e(),t(12," One lowercase "),e(),n(13,"div",25)(14,"span",26),t(15),e(),t(16," One number "),e(),n(17,"div",25)(18,"span",26),t(19),e(),t(20," One symbol "),e()()),o&2){let a=u();r(),f("met",a.requirements.length),r(2),d(" ",a.requirements.length?"check_box":"check_box_outline_blank"," "),r(2),f("met",a.requirements.upper),r(2),d(" ",a.requirements.upper?"check_box":"check_box_outline_blank"," "),r(2),f("met",a.requirements.lower),r(2),d(" ",a.requirements.lower?"check_box":"check_box_outline_blank"," "),r(2),f("met",a.requirements.number),r(2),d(" ",a.requirements.number?"check_box":"check_box_outline_blank"," "),r(2),f("met",a.requirements.symbol),r(2),d(" ",a.requirements.symbol?"check_box":"check_box_outline_blank"," ")}}function B(o,s){o&1&&(n(0,"div",23),t(1," Passwords do not match "),e())}function F(o,s){if(o&1&&(n(0,"div",23),t(1),e()),o&2){let a=u();r(),d(" ",a.roleDisclaimer," ")}}function L(o,s){if(o&1&&(n(0,"div",27)(1,"span",2),t(2,"error"),e(),t(3),e()),o&2){let a=u();r(3),d(" ",a.errorMessage," ")}}function j(o,s){if(o&1&&(n(0,"div",28)(1,"span",2),t(2,"check_circle"),e(),t(3),e()),o&2){let a=u();r(3),d(" ",a.successMessage," ")}}var A=class o{constructor(s,a,i,m){this.http=s;this.router=a;this.loadingService=i;this.platformId=m}rootUserId=null;domainId=null;domainName="";name="";password="";confirmPassword="";role="";nameDisclaimer="";passwordDisclaimer="";roleDisclaimer="";errorMessage="";successMessage="";ngOnInit(){if(O(this.platformId)){let s=window.history.state;s&&s.domain_id?(this.domainId=s.domain_id,this.rootUserId=s.rootUser_id,this.domainName=s.domain_name):this.router.navigate(["/domain-explorer-v9z"])}}requirements={length:!1,upper:!1,lower:!1,number:!1,symbol:!1};validateName(){this.name&&!/^[A-Za-z\s]+$/.test(this.name)?this.nameDisclaimer="Name can only contain letters and spaces":this.name&&this.name.length<3?this.nameDisclaimer="Name must be at least 3 characters long":this.nameDisclaimer=""}validatePassword(){this.requirements.length=this.password.length>=8&&this.password.length<=16,this.requirements.upper=/[A-Z]/.test(this.password),this.requirements.lower=/[a-z]/.test(this.password),this.requirements.number=/[0-9]/.test(this.password),this.requirements.symbol=/[!@#$%^&*(),.?":{}|<>]/.test(this.password)}validateRole(){this.role&&!/^[A-Za-z0-9-]+$/.test(this.role)?this.roleDisclaimer="Role can only contain letters, numbers, and hyphens":this.roleDisclaimer=""}isFormValid(){return!!this.name&&!!this.password&&!!this.confirmPassword&&this.password===this.confirmPassword&&!!this.role&&!this.nameDisclaimer&&!this.roleDisclaimer&&this.requirements.length&&this.requirements.upper&&this.requirements.lower&&this.requirements.number&&this.requirements.symbol}goBack(){this.router.navigate(["/view-domain-k2m"],{state:{domain_id:this.domainId,rootUser_id:this.rootUserId,domain_name:this.domainName}})}onCreateIamUser(){if(!this.isFormValid())return;this.loadingService.show(),this.errorMessage="",this.successMessage="";let s=`http://localhost:8000/be/domain/iamUser?id=${this.rootUserId}&domain_name=${encodeURIComponent(this.domainName)}`,a={name:this.name,password:this.password,role:this.role};this.http.post(s,a,{responseType:"text"}).subscribe({next:i=>{this.loadingService.hide();let m=(i||"").replace(/^"|"$/g,"").trim();m===`IAM user created under this domain - ${this.domainName}`?(this.successMessage=m,setTimeout(()=>{this.goBack()},2e3)):this.errorMessage=m||"Failed to create IAM user"},error:i=>{this.loadingService.hide(),this.errorMessage="An error occurred. Please try again."}})}static \u0275fac=function(a){return new(a||o)(_(y),_(I),_(T),_(C))};static \u0275cmp=M({type:o,selectors:[["app-create-iam-user"]],decls:54,vars:12,consts:[[1,"create-iam-wrapper"],[1,"back-link",3,"click"],[1,"material-symbols-rounded"],[1,"create-iam-card"],[1,"logo-section"],[1,"material-symbols-rounded","logo-icon"],[1,"header"],[1,"subtitle"],[1,"domain-highlight"],[1,"iam-form",3,"ngSubmit"],[1,"form-group"],[1,"input-wrapper"],[1,"material-symbols-rounded","input-icon"],["type","text","name","name","placeholder","Enter user's name","required","",3,"ngModelChange","input","ngModel"],["class","disclaimer",4,"ngIf"],["type","password","name","password","placeholder","Enter new password","required","",3,"ngModelChange","input","ngModel"],["class","password-requirements-grid",4,"ngIf"],["type","password","name","confirmPassword","placeholder","Confirm new password","required","",3,"ngModelChange","ngModel"],["type","text","name","role","placeholder","Enter role (e.g. SDE-1)","required","",3,"ngModelChange","input","ngModel"],[1,"status-messages"],["class","message error",4,"ngIf"],["class","message success",4,"ngIf"],["type","submit",1,"submit-btn",3,"disabled"],[1,"disclaimer"],[1,"password-requirements-grid"],[1,"req-item"],[1,"material-symbols-rounded","req-check"],[1,"message","error"],[1,"message","success"]],template:function(a,i){a&1&&(n(0,"div",0)(1,"button",1),g("click",function(){return i.goBack()}),n(2,"span",2),t(3,"arrow_back"),e(),t(4," Back "),e(),n(5,"div",3)(6,"div",4)(7,"span",5),t(8,"group_add"),e()(),n(9,"header",6)(10,"h1"),t(11,"Create IAM User"),e(),n(12,"p",7),t(13,"Assign a new member to "),n(14,"span",8),t(15),e()()(),n(16,"form",9),g("ngSubmit",function(){return i.onCreateIamUser()}),n(17,"div",10)(18,"label"),t(19,"Full Name"),e(),n(20,"div",11)(21,"span",12),t(22,"person"),e(),n(23,"input",13),x("ngModelChange",function(l){return b(i.name,l)||(i.name=l),l}),g("input",function(){return i.validateName()}),e()(),p(24,W,2,1,"div",14),e(),n(25,"div",10)(26,"label"),t(27,"New Password"),e(),n(28,"div",11)(29,"span",12),t(30,"lock"),e(),n(31,"input",15),x("ngModelChange",function(l){return b(i.password,l)||(i.password=l),l}),g("input",function(){return i.validatePassword()}),e()(),p(32,R,21,15,"div",16),e(),n(33,"div",10)(34,"label"),t(35,"Confirm New Password"),e(),n(36,"div",11)(37,"span",12),t(38,"verified_user"),e(),n(39,"input",17),x("ngModelChange",function(l){return b(i.confirmPassword,l)||(i.confirmPassword=l),l}),e()(),p(40,B,2,0,"div",14),e(),n(41,"div",10)(42,"label"),t(43,"Access Role"),e(),n(44,"div",11)(45,"span",12),t(46,"shield_person"),e(),n(47,"input",18),x("ngModelChange",function(l){return b(i.role,l)||(i.role=l),l}),g("input",function(){return i.validateRole()}),e()(),p(48,F,2,1,"div",14),e(),n(49,"div",19),p(50,L,4,1,"div",20)(51,j,4,1,"div",21),e(),n(52,"button",22),t(53," Create IAM User "),e()()()()),a&2&&(r(15),w(i.domainName),r(8),h("ngModel",i.name),r(),c("ngIf",i.nameDisclaimer),r(7),h("ngModel",i.password),r(),c("ngIf",i.password),r(7),h("ngModel",i.confirmPassword),r(),c("ngIf",i.confirmPassword&&i.password!==i.confirmPassword),r(7),h("ngModel",i.role),r(),c("ngIf",i.roleDisclaimer),r(2),c("ngIf",i.errorMessage),r(),c("ngIf",i.successMessage),r(),c("disabled",!i.isFormValid()))},dependencies:[v,P,D,z,k,S,E,N,U,q],styles:['[_nghost-%COMP%]{display:block;font-family:Inter,sans-serif;background-color:#000;min-height:100vh;color:#fff}.create-iam-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;padding:2rem;box-sizing:border-box;align-items:center;justify-content:center;position:relative;background:radial-gradient(circle at top right,rgba(255,255,255,.05),transparent)}.back-link[_ngcontent-%COMP%]{position:absolute;top:2rem;left:2rem;display:flex;align-items:center;gap:.5rem;color:#aaa;text-decoration:none;font-size:.9rem;padding:0;background:transparent;border:none;cursor:pointer;transition:all .2s;z-index:10}.back-link[_ngcontent-%COMP%]:hover{color:#fff;transform:translate(-3px)}.back-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}@media(max-width:768px){.back-link[_ngcontent-%COMP%]{top:1.5rem;left:1.5rem}}.create-iam-card[_ngcontent-%COMP%]{width:100%;max-width:500px;background:#0a0a0ad9;-webkit-backdrop-filter:blur(24px);backdrop-filter:blur(24px);padding:3.5rem;border-radius:32px;border:1px solid rgba(255,255,255,.06);box-shadow:0 50px 100px #000000b3;animation:_ngcontent-%COMP%_cardAppear .8s cubic-bezier(.16,1,.3,1)}.logo-section[_ngcontent-%COMP%]{margin-bottom:2.5rem;text-align:center}.logo-section[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:64px;background:linear-gradient(135deg,#fff,#888);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 0 15px rgba(255,255,255,.05))}.header[_ngcontent-%COMP%]{margin-bottom:3rem;text-align:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.4rem;font-weight:700;margin-bottom:.6rem;letter-spacing:-.03em;background:linear-gradient(to bottom,#fff,#bbb);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#777;font-size:1rem}.header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]   .domain-highlight[_ngcontent-%COMP%]{color:#fff;font-weight:600;text-shadow:0 0 10px rgba(255,255,255,.2)}.iam-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;color:#aaa;text-transform:uppercase;letter-spacing:.05em}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:16px;color:#aaa;font-size:20px;opacity:.5;pointer-events:none}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background-color:#0c0c0c;border:1px solid #1a1a1a;border-radius:14px;padding:16px 16px 16px 52px;color:#ffffffe6;font-family:inherit;font-size:1rem;outline:none;transition:all .4s cubic-bezier(.16,1,.3,1);appearance:none;-webkit-appearance:none}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#333}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#ffffff26;background:#111;box-shadow:0 0 0 5px #ffffff05}.disclaimer[_ngcontent-%COMP%]{color:#ff5252;font-size:.85rem;margin-top:.5rem;padding-left:1rem;display:flex;align-items:center;gap:.4rem;animation:_ngcontent-%COMP%_fadeIn .3s ease}.disclaimer[_ngcontent-%COMP%]:before{content:"error";font-family:Material Symbols Rounded;font-size:16px}.password-requirements-grid[_ngcontent-%COMP%]{margin-top:1.5rem;display:grid;grid-template-columns:1fr 1fr;gap:.8rem 1.5rem;background:#0a0a0a;padding:1.5rem;border-radius:16px;border:1px solid rgba(255,255,255,.03)}.password-requirements-grid[_ngcontent-%COMP%]   .req-item[_ngcontent-%COMP%]{font-size:.9rem;color:#444;display:flex;align-items:center;gap:.8rem;transition:all .3s ease}.password-requirements-grid[_ngcontent-%COMP%]   .req-item[_ngcontent-%COMP%]   .req-check[_ngcontent-%COMP%]{font-size:20px;color:#333}.password-requirements-grid[_ngcontent-%COMP%]   .req-item.met[_ngcontent-%COMP%]{color:#fffc}.password-requirements-grid[_ngcontent-%COMP%]   .req-item.met[_ngcontent-%COMP%]   .req-check[_ngcontent-%COMP%]{color:#4caf50}@media(max-width:400px){.password-requirements-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.status-messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem;padding:1rem;border-radius:12px;font-size:.9rem;margin-bottom:.5rem;animation:_ngcontent-%COMP%_fadeIn .3s ease}.status-messages[_ngcontent-%COMP%]   .message.error[_ngcontent-%COMP%]{color:#ff5252;background:#ff525214;border:1px solid rgba(255,82,82,.15)}.status-messages[_ngcontent-%COMP%]   .message.success[_ngcontent-%COMP%]{color:#4caf50;background:#4caf5014;border:1px solid rgba(76,175,80,.15)}.status-messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px}.submit-btn[_ngcontent-%COMP%]{width:100%;background-color:#fff;color:#000;border:none;border-radius:14px;padding:16px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.16,1,.3,1);margin-top:1rem}.submit-btn[_ngcontent-%COMP%]:disabled{background-color:#222;color:#555;cursor:not-allowed;opacity:.6}.submit-btn[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 10px 20px #0006}.submit-btn[_ngcontent-%COMP%]:not(:disabled):active{transform:translateY(0)}@keyframes _ngcontent-%COMP%_cardAppear{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media(max-width:500px){.create-iam-card[_ngcontent-%COMP%]{padding:2rem 1.5rem;border-radius:24px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}}']})};export{A as CreateIamUser};

import{a as A,b as N,e as T,l as V}from"./chunk-6WJKHN4A.js";import{Aa as E,B as h,D as c,H as m,I as P,Ia as F,M as _,Ma as D,P as l,Q as t,R as e,W as x,X as p,Z as g,_ as O,ba as o,ca as b,da as M,ea as v,fa as w,ga as k,oa as y,p as f,q as u,ta as I,va as S,w as C,wa as z}from"./chunk-W7FZ6OA6.js";function B(a,i){if(a&1&&(t(0,"div",23)(1,"span",3),o(2,"error"),e(),o(3),e()),a&2){let n=g();c(3),M(" ",n.errorMessage," ")}}function R(a,i){if(a&1&&(t(0,"div",24)(1,"span",3),o(2,"check_circle"),e(),o(3),e()),a&2){let n=g();c(3),M(" ",n.successMessage," ")}}function U(a,i){if(a&1){let n=x();t(0,"div",25)(1,"input",26,0),p("change",function(s){f(n);let d=g();return u(d.onFileSelected(s))}),e(),t(3,"div",27),p("click",function(){f(n);let s=O(2);return u(s.click())}),t(4,"span",28),o(5,"cloud_upload"),e(),t(6,"div",29)(7,"p"),o(8,"Click to upload document or image"),e(),t(9,"span"),o(10,"Max 1 file enabled"),e()()()()}}function L(a,i){if(a&1){let n=x();t(0,"div",30)(1,"div",31)(2,"span",3),o(3,"insert_drive_file"),e(),t(4,"span",32),o(5),e()(),t(6,"button",33),p("click",function(){f(n);let s=g();return u(s.removeFile())}),t(7,"span",3),o(8,"close"),e()()()}if(a&2){let n=g();c(5),b(n.fileName())}}function H(a,i){a&1&&(t(0,"p",34),o(1,"* Either content or file must be provided"),e())}var j=class a{constructor(i,n,r,s,d){this.http=i;this.router=n;this.loadingService=r;this.cd=s;this.platformId=d}domainId=null;rootUserId=null;domainName=C("");content="";selectedFile=null;fileName=C("");errorMessage="";successMessage="";ngOnInit(){if(z(this.platformId)){let i=window.history.state;i&&i.domain_name&&(this.domainId=i.domain_id,this.rootUserId=i.rootUser_id,this.domainName.set(i.domain_name)),this.domainName()||this.router.navigate(["/root-home-v2b"])}}onFileSelected(i){let n=i.target.files[0];n&&(this.selectedFile=n,this.fileName.set(n.name))}removeFile(){this.selectedFile=null,this.fileName.set("")}isFormValid(){return this.content.trim().length>0||this.selectedFile!==null}onPost(){if(!this.isFormValid()){this.errorMessage="Either content or file any one must be fill to post announcement";return}this.loadingService.show(),this.errorMessage="",this.successMessage="";let i=new FormData;i.append("rootUser_id",this.rootUserId||"1"),i.append("domain_name",this.domainName()),this.content.trim()&&i.append("content",this.content.trim()),this.selectedFile&&i.append("attachment",this.selectedFile),this.http.post("http://localhost:8000/be/announcement",i,{responseType:"text"}).subscribe({next:n=>{this.loadingService.hide();let r=(n||"").replace(/^"|"$/g,"").trim();r==="Announcement posted successfully"?(this.successMessage=r,this.cd.detectChanges(),setTimeout(()=>{this.goBack()},1500)):(this.errorMessage=r||"Failed to post announcement",this.cd.detectChanges())},error:n=>{this.loadingService.hide(),console.error("Error posting announcement:",n),this.errorMessage="Network error. Please try again.",this.cd.detectChanges()}})}goBack(){this.router.navigate(["/post-announcement-v2x"],{state:{domain_id:this.domainId,rootUser_id:this.rootUserId,domain_name:this.domainName()}})}static \u0275fac=function(n){return new(n||a)(m(E),m(F),m(D),m(y),m(h))};static \u0275cmp=P({type:a,selectors:[["app-create-announcement"]],decls:39,vars:8,consts:[["fileInput",""],[1,"create-announcement-wrapper"],[1,"back-link",3,"click"],[1,"material-symbols-rounded"],[1,"main-content"],[1,"page-header"],[1,"badge"],[1,"badge-text"],[1,"welcome-text"],[1,"subtitle"],[1,"form-container"],[1,"status-messages"],["class","message error",4,"ngIf"],["class","message success",4,"ngIf"],[1,"input-card"],[1,"input-section"],[1,"textarea-wrapper"],["placeholder","Type your announcement here...","rows","6",3,"ngModelChange","ngModel"],["class","upload-area",4,"ngIf"],["class","file-preview",4,"ngIf"],[1,"action-footer"],[1,"post-btn",3,"click","disabled"],["class","validation-note",4,"ngIf"],[1,"message","error"],[1,"message","success"],[1,"upload-area"],["type","file",2,"display","none",3,"change"],[1,"drop-zone",3,"click"],[1,"material-symbols-rounded","upload-icon"],[1,"upload-text"],[1,"file-preview"],[1,"file-info"],[1,"file-name"],[1,"remove-btn",3,"click"],[1,"validation-note"]],template:function(n,r){n&1&&(t(0,"div",1)(1,"button",2),p("click",function(){return r.goBack()}),t(2,"span",3),o(3,"arrow_back"),e(),o(4," Back "),e(),t(5,"main",4)(6,"header",5)(7,"div",6)(8,"span",3),o(9,"campaign"),e(),t(10,"span",7),o(11,"New Broadcast"),e()(),t(12,"h1",8),o(13,"Post Announcement"),e(),t(14,"p",9),o(15,"Broadcast updates to "),t(16,"strong"),o(17),e()()(),t(18,"div",10)(19,"div",11),_(20,B,4,1,"div",12)(21,R,4,1,"div",13),e(),t(22,"div",14)(23,"div",15)(24,"label"),o(25,"Announcement Content"),e(),t(26,"div",16)(27,"textarea",17),k("ngModelChange",function(d){return w(r.content,d)||(r.content=d),d}),e()()(),t(28,"div",15)(29,"label"),o(30,"Attachment (Optional)"),e(),_(31,U,11,0,"div",18)(32,L,9,1,"div",19),e()(),t(33,"div",20)(34,"button",21),p("click",function(){return r.onPost()}),t(35,"span",3),o(36,"send"),e(),o(37," Post Announcement "),e(),_(38,H,2,0,"p",22),e()()()()),n&2&&(c(17),b(r.domainName()),c(3),l("ngIf",r.errorMessage),c(),l("ngIf",r.successMessage),c(6),v("ngModel",r.content),c(4),l("ngIf",!r.selectedFile),c(),l("ngIf",r.selectedFile),c(2),l("disabled",!r.isFormValid()),c(4),l("ngIf",!r.isFormValid()))},dependencies:[S,I,V,A,N,T],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background-color:#000;font-family:Inter,sans-serif;color:#fff}.create-announcement-wrapper[_ngcontent-%COMP%]{padding:2rem;min-height:100vh;position:relative;box-sizing:border-box}.back-link[_ngcontent-%COMP%]{position:absolute;top:2rem;left:2rem;background:transparent;border:none;color:#aaa;display:flex;align-items:center;gap:.5rem;cursor:pointer;font-size:.9rem;transition:color .2s}.back-link[_ngcontent-%COMP%]:hover{color:#fff}.back-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}.main-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:4rem 0}.page-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3.5rem}.page-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;background:#ffffff0d;padding:6px 14px;border-radius:100px;border:1px solid rgba(255,255,255,.1);margin-bottom:1.5rem;color:#aaa}.page-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px}.page-header[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   .badge-text[_ngcontent-%COMP%]{font-size:.85rem;font-weight:500;text-transform:uppercase;letter-spacing:.05em}.page-header[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:.75rem;letter-spacing:-.01em}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#aaa;font-size:1.1rem}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff}.form-container[_ngcontent-%COMP%]{background:#161616;border:1px solid rgba(255,255,255,.12);border-radius:32px;padding:2.5rem;box-shadow:0 40px 100px #000c}.input-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.5rem;margin-bottom:3rem}.input-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.input-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;color:#aaa;text-transform:uppercase;letter-spacing:.05em}.input-section[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;background:#080808;border:1px solid #222;border-radius:16px;padding:1.2rem;color:#fff;font-family:inherit;font-size:1rem;line-height:1.6;resize:none;outline:none;transition:all .3s;box-sizing:border-box;display:block}.input-section[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#ffffff4d;background:#0c0c0c;box-shadow:0 0 0 4px #ffffff05}.upload-area[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{background:#ffffff05;border:2px dashed rgba(255,255,255,.1);border-radius:20px;padding:3rem;text-align:center;cursor:pointer;transition:all .3s cubic-bezier(.16,1,.3,1)}.upload-area[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]:hover{background:#f1c40f08;border-color:#f1c40f4d}.upload-area[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]:hover   .upload-icon[_ngcontent-%COMP%]{color:#f1c40f;transform:translateY(-4px)}.upload-area[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:48px;color:#444;margin-bottom:1.2rem;transition:all .3s}.upload-area[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:500;margin-bottom:.4rem;color:#ddd}.upload-area[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;color:#aaa}.file-preview[_ngcontent-%COMP%]{background:#f1c40f0d;border:1px solid rgba(241,196,15,.2);border-radius:16px;padding:1.2rem;display:flex;align-items:center;justify-content:space-between;gap:12px;width:100%;box-sizing:border-box;overflow:hidden}.file-preview[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#f1c40f;min-width:0;flex:1}.file-preview[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-size:24px;flex-shrink:0}.file-preview[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;width:100%}.file-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{background:#ff52521a;border:none;color:#ff5252;width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;flex-shrink:0}.file-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{background:#ff5252;color:#fff}.file-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px}.action-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.2rem}.action-footer[_ngcontent-%COMP%]   .post-btn[_ngcontent-%COMP%]{width:100%;background:#fff;color:#000;border:none;padding:1.2rem;border-radius:16px;font-size:1.1rem;font-weight:700;display:flex;align-items:center;justify-content:center;gap:12px;cursor:pointer;transition:all .3s cubic-bezier(.16,1,.3,1)}.action-footer[_ngcontent-%COMP%]   .post-btn[_ngcontent-%COMP%]:disabled{background:#222;color:#555;cursor:not-allowed;opacity:.8}.action-footer[_ngcontent-%COMP%]   .post-btn[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-4px);box-shadow:0 20px 40px #ffffff26}.action-footer[_ngcontent-%COMP%]   .post-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px}.action-footer[_ngcontent-%COMP%]   .validation-note[_ngcontent-%COMP%]{font-size:.85rem;color:#ff5252;opacity:.8}.status-messages[_ngcontent-%COMP%]{margin-bottom:2rem}.status-messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:1rem;border-radius:12px;font-size:.95rem;margin-bottom:1rem}.status-messages[_ngcontent-%COMP%]   .message.error[_ngcontent-%COMP%]{color:#ff5252;background:#ff52521a;border:1px solid rgba(255,82,82,.2)}.status-messages[_ngcontent-%COMP%]   .message.success[_ngcontent-%COMP%]{color:#4caf50;background:#4caf501a;border:1px solid rgba(76,175,80,.2)}@media(max-width:768px){.create-announcement-wrapper[_ngcontent-%COMP%]{padding:.5rem}.back-link[_ngcontent-%COMP%]{top:1.5rem;left:1.5rem}.main-content[_ngcontent-%COMP%]{padding:4rem 1.25rem 2rem}.page-header[_ngcontent-%COMP%]{margin-bottom:2.5rem}.page-header[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{font-size:2rem}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem}.form-container[_ngcontent-%COMP%]{padding:1.5rem 1.25rem;border-radius:24px}.input-card[_ngcontent-%COMP%]{gap:1.8rem}.upload-area[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{padding:2rem 1rem}}"]})};export{j as CreateAnnouncement};

import{a as F,b as Q,e as B,l as H}from"./chunk-D3LC5IFA.js";import{B as y,D as s,H as p,Ha as j,I as k,Ia as R,La as W,M as x,P as f,Q as t,R as e,W as C,X as _,Z as u,_ as S,ba as i,ca as M,da as O,ea as I,fa as D,ga as E,la as z,p as l,q as g,ra as L,sa as U,ua as V,va as T,w,za as N}from"./chunk-7ZATYVOE.js";function A(c,d){if(c&1){let o=C();t(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"span",3),i(5,"domain"),e()(),t(6,"div",21)(7,"h3"),i(8),e()()(),t(9,"div",22)(10,"div",23)(11,"span",3),i(12,"group"),e(),t(13,"span",24),i(14),e(),t(15,"span",25),i(16,"Users"),e()(),t(17,"button",26),_("click",function(){let n=l(o).$implicit,a=u(2);return g(a.onViewDomain(n))}),t(18,"span"),i(19,"View"),e(),t(20,"span",3),i(21,"chevron_right"),e()()()()()}if(c&2){let o=d.$implicit;s(8),M(o.name),s(6),M(o.iamCount)}}function J(c,d){if(c&1&&(t(0,"div",15),x(1,A,22,2,"div",16),e()),c&2){let o=u();s(),f("ngForOf",o.domains())}}function G(c,d){c&1&&(t(0,"div",27)(1,"div",28)(2,"span",3),i(3,"domain_disabled"),e()(),t(4,"h2"),i(5,"No domains are found"),e(),t(6,"p"),i(7,"Start by creating your first domain environment."),e(),t(8,"button",29)(9,"span",3),i(10,"add"),e(),i(11," Create Domain "),e()())}function K(c,d){if(c&1&&(t(0,"div",30)(1,"span",3),i(2,"error"),e(),i(3),e()),c&2){let o=u();s(3),O(" ",o.errorMessage," ")}}var $=class c{constructor(d,o,r,n){this.http=d;this.router=o;this.loadingService=r;this.platformId=n}rootUserId=null;rootUserName=null;domains=w([]);searchQuery="";errorMessage="";ngOnInit(){if(T(this.platformId)){if(this.rootUserId=localStorage.getItem("rootUserId"),this.rootUserName=localStorage.getItem("rootUserName"),!this.rootUserId){this.router.navigate(["/auth-v1"]);return}this.fetchDomains()}}onSearch(){this.fetchDomains(this.searchQuery)}fetchDomains(d=""){this.loadingService.show(),this.errorMessage="";let o=`http://localhost:8000/be/rootUser?id=${this.rootUserId}`;d&&(o+=`&search=${encodeURIComponent(d)}`);let r=n=>{let a=(n||"").trim();if(!a){this.domains.set([]);return}let m=[];if(a.startsWith("[")&&a.endsWith("]"))try{m=JSON.parse(a)}catch{m=a.slice(1,-1).split(/,(?![^()]*\))/).map(b=>b.trim().replace(/^"|"$/g,""))}else m=[a];let Y=m.map(h=>{let b=h.match(/id\s*[=:]\s*(\d+)/i),P=h.match(/domain_name\s*[=:]\s*([^,)\s]+)/i),v=h.match(/IAM User Count\s*[:]\s*(\d+)/i);return{id:b?b[1]:"?",name:P?P[1].trim():"Unknown Domain",iamCount:v?v[1]:"0"}});this.domains.set(Y)};this.http.get(o,{responseType:"text"}).subscribe({next:n=>{this.loadingService.hide(),r(n)},error:n=>{if(this.loadingService.hide(),n.status===302&&n.error){console.log("Handling 302 with data in body:",n.error);try{r(n.error);return}catch(a){console.error("Failed to parse 302 body",a)}}console.error("Domain Fetch Error:",n),this.errorMessage=`HTTP ${n.status}: ${n.message||"Connection failed"}.`}})}onViewDomain(d){this.router.navigate(["/view-domain-k2m"],{state:{domain_id:d.id,rootUser_id:this.rootUserId,domain_name:d.name}})}goBack(){this.router.navigate(["/root-home-v2b"])}static \u0275fac=function(o){return new(o||c)(p(N),p(j),p(W),p(y))};static \u0275cmp=k({type:c,selectors:[["app-domain-list"]],decls:22,vars:6,consts:[["emptyState",""],[1,"domain-list-wrapper"],[1,"back-link",3,"click"],[1,"material-symbols-rounded"],[1,"domain-list-container"],[1,"header"],[1,"page-title"],[1,"subtitle"],[1,"search-bar"],[1,"search-input-wrapper"],[1,"material-symbols-rounded","search-icon"],["type","text","placeholder","Search domains...",3,"ngModelChange","keyup.enter","ngModel"],[1,"search-btn",3,"click","disabled"],["class","domains-grid",4,"ngIf","ngIfElse"],["class","message error",4,"ngIf"],[1,"domains-grid"],["class","domain-card",4,"ngFor","ngForOf"],[1,"domain-card"],[1,"card-content"],[1,"domain-info"],[1,"icon-box"],[1,"text-details"],[1,"actions-area"],[1,"iam-badge"],[1,"count-value"],[1,"label"],[1,"view-btn",3,"click"],[1,"empty-state"],[1,"empty-icon"],["routerLink","/new-domain-v8x",1,"create-btn"],[1,"message","error"]],template:function(o,r){if(o&1){let n=C();t(0,"div",1)(1,"button",2),_("click",function(){return l(n),g(r.goBack())}),t(2,"span",3),i(3,"arrow_back"),e(),i(4," Back "),e(),t(5,"div",4)(6,"header",5)(7,"h1",6),i(8),e(),t(9,"p",7),i(10,"Manage your infrastructure environments"),e(),t(11,"div",8)(12,"div",9)(13,"span",10),i(14,"search"),e(),t(15,"input",11),E("ngModelChange",function(m){return l(n),D(r.searchQuery,m)||(r.searchQuery=m),g(m)}),_("keyup.enter",function(){return l(n),g(r.onSearch())}),e()(),t(16,"button",12),_("click",function(){return l(n),g(r.onSearch())}),i(17," Search "),e()()(),x(18,J,2,1,"div",13)(19,G,12,0,"ng-template",null,0,z)(21,K,4,1,"div",14),e()()}if(o&2){let n=S(20);s(8),O("Domains for ",r.rootUserName),s(7),I("ngModel",r.searchQuery),s(),f("disabled",!r.searchQuery.trim()),s(2),f("ngIf",r.domains().length>0)("ngIfElse",n),s(3),f("ngIf",r.errorMessage)}},dependencies:[V,L,U,R,H,F,Q,B],styles:["[_nghost-%COMP%]{display:block;font-family:Inter,sans-serif;background-color:#000;min-height:100vh;color:#fff;overflow-x:hidden}.domain-list-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;padding:2rem;box-sizing:border-box;overflow-x:hidden;position:relative}@media(max-width:768px){.domain-list-wrapper[_ngcontent-%COMP%]{padding:2rem 1rem}}.back-link[_ngcontent-%COMP%]{position:absolute;top:2rem;left:2rem;background:transparent;border:none;color:#aaa;display:flex;align-items:center;gap:.5rem;cursor:pointer;font-size:.9rem;padding:0;transition:color .2s;z-index:100}.back-link[_ngcontent-%COMP%]:hover{color:#fff}.back-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}@media(max-width:768px){.back-link[_ngcontent-%COMP%]{top:1rem;left:1rem}}.domain-list-container[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:3rem;text-align:center;position:relative;padding-top:1rem}@media(max-width:768px){.header[_ngcontent-%COMP%]{padding-top:2.5rem}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem;background:linear-gradient(135deg,#fff,#888);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#aaa;font-size:1rem;margin-bottom:2rem}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;gap:.8rem;max-width:500px;margin:0 auto;width:100%;box-sizing:border-box}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{flex:1;position:relative;display:flex;align-items:center;min-width:0}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;color:#666;font-size:20px;pointer-events:none}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:#ffffff08;border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:12px 12px 12px 42px;color:#fff;font-family:inherit;font-size:.95rem;outline:none;transition:all .2s;box-sizing:border-box}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#ffffff12;border-color:#fff3}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#444}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:none;border-radius:12px;padding:0 1.5rem;font-weight:700;font-size:.95rem;cursor:pointer;transition:all .3s cubic-bezier(.16,1,.3,1);height:48px}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 15px #ffffff1a}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]:disabled{background:#222;color:#555;cursor:not-allowed;opacity:.6;filter:grayscale(1)}@media(max-width:480px){.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{flex-direction:column;gap:.6rem}.header[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-btn[_ngcontent-%COMP%]{width:100%;height:48px}}.domains-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:100%}.domain-card[_ngcontent-%COMP%]{background:#121212b3;border:1px solid rgba(255,255,255,.05);border-radius:16px;padding:1.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s cubic-bezier(.4,0,.2,1);box-sizing:border-box}@media(max-width:480px){.domain-card[_ngcontent-%COMP%]{padding:1rem}}.domain-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);background:#ffffff0d;border-color:#ffffff1a;box-shadow:0 10px 30px #0006}.domain-card[_ngcontent-%COMP%]:hover   .view-btn[_ngcontent-%COMP%]{background-color:#fff;color:#000}.domain-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1.5rem}@media(max-width:600px){.domain-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1.2rem}}.domain-card[_ngcontent-%COMP%]   .domain-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.2rem}.domain-card[_ngcontent-%COMP%]   .domain-info[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]{width:50px;height:50px;background:#ffffff0d;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff}.domain-card[_ngcontent-%COMP%]   .domain-info[_ngcontent-%COMP%]   .icon-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px}.domain-card[_ngcontent-%COMP%]   .domain-info[_ngcontent-%COMP%]   .text-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:0}.domain-card[_ngcontent-%COMP%]   .actions-area[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}@media(max-width:600px){.domain-card[_ngcontent-%COMP%]   .actions-area[_ngcontent-%COMP%]{width:100%;flex-direction:column;gap:1rem}}.domain-card[_ngcontent-%COMP%]   .iam-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem;background:#ffffff08;padding:.5rem 1rem;border-radius:100px;border:1px solid rgba(255,255,255,.05);color:#aaa;font-size:.85rem}.domain-card[_ngcontent-%COMP%]   .iam-badge[_ngcontent-%COMP%]   span.material-symbols-rounded[_ngcontent-%COMP%]{font-size:18px;color:#fff;opacity:.7}.domain-card[_ngcontent-%COMP%]   .iam-badge[_ngcontent-%COMP%]   .count-value[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:1rem}.domain-card[_ngcontent-%COMP%]   .iam-badge[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{opacity:.6}@media(max-width:600px){.domain-card[_ngcontent-%COMP%]   .iam-badge[_ngcontent-%COMP%]{width:100%;justify-content:center;box-sizing:border-box}}.domain-card[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(255,255,255,.1);color:#fff;padding:.8rem 1.5rem;border-radius:10px;font-weight:600;font-size:.9rem;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .2s}.domain-card[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{margin-top:2px}@media(max-width:480px){.domain-card[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#121212b3;border:1px dashed rgba(255,255,255,.1);border-radius:20px}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#444}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:64px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa;margin-bottom:2rem}.empty-state[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:none;padding:.9rem 2rem;border-radius:10px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:.8rem;transition:all .2s}.empty-state[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-2px)}.message[_ngcontent-%COMP%]{margin-top:2rem;padding:1rem;border-radius:12px;font-size:.9rem;display:flex;align-items:center;gap:.8rem}.message.error[_ngcontent-%COMP%]{background:#ff52521a;color:#ff5252;border:1px solid rgba(255,82,82,.2)}"]})};export{$ as DomainList};
